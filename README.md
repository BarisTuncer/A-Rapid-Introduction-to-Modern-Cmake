# Hello Modern CMake

## Global set up 

CMake starts its journey by checking the CMakeLists.txt in the top folder
which is `NonTrivialCMakeExp/CMakeLists.txt` in our case. 

We start by investigating `NonTrivialCMakeExp/CMakeLists.txt`:

`cmake_minimum_required(VERSION 3.18)` : Sets the minimum required version of cmake for a project. You can 
check your own version of CMake by `cmake --version` in the terminal.

`set(CMAKE_C_STANDARD 11)` : Sets the `C_STANDARD` variable to 11 for all targets

`set(CMAKE_C_STANDARD_REQUIRED ON)` : If `CMAKE_C_STANDARD_REQUIRED` is OFF or unset, the `C_STANDARD` target property is treated 
as optional and may “decay” to a previous standard if the requested is not available.

`project(NonTrivialCMakeExample)` : Sets the name of our project

`add_compile_options(-Wall -Wextra)` : WARNING: This is global. Act for all targets in the current directory and below that are added after this command is invoked
we should keep the global settings as small as possible



Finally `add_subdirectory(Driver)` tells CMake to switch to the Driver directory and continue from `Driver/CMakeLists.txt`

## Preparing make file to compile main

Now CMake continues it journey by checking `Driver/CMakeLists.txt`.

The file main.c want to say hello to Modern CMake. As you can see
adding the executable which accomplish this task is fairly simple.
We just add `add_executable(main ${PROJECT_SOURCE_DIR}/main.c)` 

`PROJECT_SOURCE_DIR` inside the Driver/CMakeLists.txt macro refers to  the 
Top level source directory for the `current` project which is the folder Driver in our case.
So the executable main will be generated by the file Driver/main.c

## Building main

CMake is not a building tool. It creates the make script for us to build the project.

CMake is a program that produces an output. If we call it from the directory `NonTrivialCMakeExp` then
it will produce its output into the `NonTrivialCMakeExp`. We don't want to pollute our project directory.
So we create a new directory for the output, say build, by `mkdir build`. Next `cd build` and 
finally `cmake ..`, i.e. from the `build` directory, we tell CMake to act on the parent directory `NonTrivialCMakeExp`
and produce its output inside the `build` directory. 

Now, if there was no error, `make` file is created for us. Simple run `make`. We can now checkout to the
`Driver` folder inside `build` and run the executable main: `.\main`. 

